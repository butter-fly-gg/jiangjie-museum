{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"beautiful-ar\"\n};\nconst _hoisted_2 = {\n  class: \"art-wrap\"\n};\nconst _hoisted_3 = [\"src\", \"alt\"];\nconst _hoisted_4 = {\n  class: \"progress\"\n};\nconst _hoisted_5 = {\n  class: \"bar\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" å¯æ»‘åŠ¨çš„è½®æ’­å®¹å™¨ \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"slides\", {\n      grabbing: $setup.dragActive\n    }]),\n    onPointerdown: _withModifiers($setup.onPointerDown, [\"prevent\"]),\n    onPointermove: _withModifiers($setup.onPointerMove, [\"prevent\"]),\n    onPointerup: _withModifiers($setup.onPointerUp, [\"prevent\"]),\n    onPointercancel: $setup.onPointerUp,\n    onMouseleave: $setup.onPointerUp,\n    style: _normalizeStyle($setup.slidesStyle)\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.slides, s => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: s.id,\n      class: \"slide\"\n    }, [_createElementVNode(\"img\", {\n      class: \"art-img\",\n      src: s.image,\n      alt: s.title\n    }, null, 8 /* PROPS */, _hoisted_3)]);\n  }), 128 /* KEYED_FRAGMENT */))], 38 /* CLASS, STYLE, NEED_HYDRATION */), _createCommentVNode(\" å·¦å³ç¿»é¡µ \"), _createElementVNode(\"button\", {\n    class: \"nav left\",\n    onClick: $setup.prev,\n    \"aria-label\": \"ä¸Šä¸€å¼ \"\n  }, \"â€¹\"), _createElementVNode(\"button\", {\n    class: \"nav right\",\n    onClick: $setup.next,\n    \"aria-label\": \"ä¸‹ä¸€å¼ \"\n  }, \"â€º\"), _createCommentVNode(\" å¬å¥¹è¯´ æŒ‰é’® \"), _createElementVNode(\"button\", {\n    class: \"listen\",\n    onClick: $setup.speak,\n    \"aria-pressed\": \"false\"\n  }, [...(_cache[0] || (_cache[0] = [_createElementVNode(\"span\", {\n    class: \"ear\"\n  }, \"ğŸ§\", -1 /* CACHED */), _createElementVNode(\"span\", {\n    class: \"txt\"\n  }, \"å¬å¥¹è¯´\", -1 /* CACHED */)]))]), _createCommentVNode(\" åº•éƒ¨ä¿¡æ¯å¡ \"), _createElementVNode(\"div\", {\n    class: \"bottom-card\"\n  }, [_cache[2] || (_cache[2] = _createStaticVNode(\"<div class=\\\"card-left\\\" data-v-70af0438><div class=\\\"title\\\" data-v-70af0438>è¿½æ±‚çœŸç† <span class=\\\"en\\\" data-v-70af0438>HUNGER FOR TRUTH</span></div><div class=\\\"excerpt\\\" data-v-70af0438>æŠ—æ—¥æˆ˜äº‰å…¨é¢çˆ†å‘åï¼Œä¸ºç–æ•£æ•™èŒï¼Œå—å²¸ä¸­å­¦è¿åˆ°é™„è¿‘ï¼Œæ±Ÿç«¹ç­ å¹¶æ²¡æœ‰ä¸å­¦æ ¡è¿ç§»ã€‚1938å¹´ï¼Œå¥¹ä¸»åŠ¨è®¢é˜…ã€Šæ–°åæ—¥æŠ¥ã€‹ï¼Œå¼€å§‹è®¤è¯†äº†è§£å…±äº§å…šã€‚</div><div class=\\\"rating\\\" data-v-70af0438>â­ï¸â­ï¸â­ï¸â˜†â˜†</div></div>\", 1)), _createElementVNode(\"div\", {\n    class: \"card-right\"\n  }, [_createElementVNode(\"button\", {\n    class: \"ar-cta\",\n    onClick: $setup.enterAr,\n    \"aria-label\": \"è¿›å…¥ AR ä½“éªŒ\"\n  }, [...(_cache[1] || (_cache[1] = [_createElementVNode(\"div\", {\n    class: \"cta-text\"\n  }, [_createTextVNode(\"ç«‹å³AR\"), _createElementVNode(\"br\"), _createTextVNode(\"æ²‰æµ¸å¼ä½“éªŒ\")], -1 /* CACHED */), _createElementVNode(\"div\", {\n    class: \"cta-arrow\"\n  }, \"â†—\", -1 /* CACHED */)]))])])]), _createCommentVNode(\" åº•éƒ¨è¿›åº¦æ¡ \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", {\n    class: \"pos\",\n    style: _normalizeStyle({\n      width: $setup.progress + '%'\n    })\n  }, null, 4 /* STYLE */)])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_normalizeClass","grabbing","$setup","dragActive","onPointerdown","_withModifiers","onPointerDown","onPointermove","onPointerMove","onPointerup","onPointerUp","onPointercancel","onMouseleave","style","_normalizeStyle","slidesStyle","_Fragment","_renderList","slides","s","key","id","src","image","alt","title","onClick","prev","next","speak","enterAr","_hoisted_4","_hoisted_5","width","progress"],"sources":["E:\\jiangjie-museum\\GitHub\\jiangjie-museum\\src\\views\\BeautifulAR.vue"],"sourcesContent":["<template>\r\n  <div class=\"beautiful-ar\">\r\n    <div class=\"art-wrap\">\r\n      <!-- å¯æ»‘åŠ¨çš„è½®æ’­å®¹å™¨ -->\r\n      <div class=\"slides\" :class=\"{ grabbing: dragActive }\" @pointerdown.prevent=\"onPointerDown\" @pointermove.prevent=\"onPointerMove\" @pointerup.prevent=\"onPointerUp\" @pointercancel=\"onPointerUp\" @mouseleave=\"onPointerUp\" :style=\"slidesStyle\">\r\n        <div v-for=\"s in slides\" :key=\"s.id\" class=\"slide\">\r\n          <img class=\"art-img\" :src=\"s.image\" :alt=\"s.title\" />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- å·¦å³ç¿»é¡µ -->\r\n      <button class=\"nav left\" @click=\"prev\" aria-label=\"ä¸Šä¸€å¼ \">â€¹</button>\r\n      <button class=\"nav right\" @click=\"next\" aria-label=\"ä¸‹ä¸€å¼ \">â€º</button>\r\n\r\n      <!-- å¬å¥¹è¯´ æŒ‰é’® -->\r\n      <button class=\"listen\" @click=\"speak\" aria-pressed=\"false\">\r\n        <span class=\"ear\">ğŸ§</span>\r\n        <span class=\"txt\">å¬å¥¹è¯´</span>\r\n      </button>\r\n\r\n      <!-- åº•éƒ¨ä¿¡æ¯å¡ -->\r\n      <div class=\"bottom-card\">\r\n        <div class=\"card-left\">\r\n          <div class=\"title\">è¿½æ±‚çœŸç† <span class=\"en\">HUNGER FOR TRUTH</span></div>\r\n          <div class=\"excerpt\">æŠ—æ—¥æˆ˜äº‰å…¨é¢çˆ†å‘åï¼Œä¸ºç–æ•£æ•™èŒï¼Œå—å²¸ä¸­å­¦è¿åˆ°é™„è¿‘ï¼Œæ±Ÿç«¹ç­ å¹¶æ²¡æœ‰ä¸å­¦æ ¡è¿ç§»ã€‚1938å¹´ï¼Œå¥¹ä¸»åŠ¨è®¢é˜…ã€Šæ–°åæ—¥æŠ¥ã€‹ï¼Œå¼€å§‹è®¤è¯†äº†è§£å…±äº§å…šã€‚</div>\r\n          <div class=\"rating\">â­ï¸â­ï¸â­ï¸â˜†â˜†</div>\r\n        </div>\r\n\r\n        <div class=\"card-right\">\r\n          <button class=\"ar-cta\" @click=\"enterAr\" aria-label=\"è¿›å…¥ AR ä½“éªŒ\">\r\n            <div class=\"cta-text\">ç«‹å³AR<br/>æ²‰æµ¸å¼ä½“éªŒ</div>\r\n            <div class=\"cta-arrow\">â†—</div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- åº•éƒ¨è¿›åº¦æ¡ -->\r\n      <div class=\"progress\">\r\n        <div class=\"bar\"><div class=\"pos\" :style=\"{ width: progress + '%' }\"></div></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n/* eslint-env vue/setup-compiler-macros */\r\nimport { ref, computed } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport art1 from '@/assets/images/beautiful/memory-placeholder.jpg'\r\nimport art2 from '@/assets/images/beautiful/more.jpg'\r\nimport art3 from '@/assets/images/beautiful/leisure.jpg'\r\n\r\nconst router = useRouter()\r\n\r\nconst slides = ref([\r\n  { id: 1, title: 'è¿½æ±‚çœŸç† - 1', image: art1, desc: 'æŠ—æ—¥æˆ˜äº‰å…¨é¢çˆ†å‘åï¼Œå¥¹ä¸»åŠ¨è®¢é˜…ã€Šæ–°åæ—¥æŠ¥ã€‹å¹¶å¼€å§‹äº†è§£å…±äº§å…šã€‚' },\r\n  { id: 2, title: 'è¿½æ±‚çœŸç† - 2', image: art2, desc: 'åœ¨åŸå¸‚é‡Œæ²¡æœ‰æ–‡åŒ–å’ŒçŸ¥è¯†æ ¹æœ¬ä¼ ä¸ä¸‹å»ï¼Œåªæœ‰çŸ¥è¯†æ‰èƒ½æ”¹å˜è‡ªå·±ã€‚' },\r\n  { id: 3, title: 'è¿½æ±‚çœŸç† - 3', image: art3, desc: '1938 å¹´ï¼Œå¥¹å¼€å§‹ç”¨æ–‡å­—ä¸è¡ŒåŠ¨è¿½æ±‚çœŸç†ã€‚' }\r\n])\r\n\r\nconst idx = ref(0)\r\nconst current = computed(() => slides.value[idx.value])\r\nconst progress = computed(() => Math.round((idx.value / (slides.value.length - 1)) * 100))\r\n\r\n// swipe / drag state\r\nconst dragOffset = ref(0)\r\nconst dragActive = ref(false)\r\nlet startX = 0\r\n\r\nconst slidesStyle = computed(() => ({\r\n  width: `${slides.value.length * 100}%`,\r\n  transform: `translateX(calc(-${idx.value * 100}% + ${dragOffset.value}px))`,\r\n}))\r\n\r\nfunction prev(){\r\n  stopSpeech()\r\n  idx.value = (idx.value - 1 + slides.value.length) % slides.value.length\r\n}\r\nfunction next(){\r\n  stopSpeech()\r\n  idx.value = (idx.value + 1) % slides.value.length\r\n}\r\n\r\nfunction onPointerDown(e){\r\n  dragActive.value = true\r\n  startX = e.clientX\r\n}\r\nfunction onPointerMove(e){\r\n  if(!dragActive.value) return\r\n  dragOffset.value = e.clientX - startX\r\n}\r\nfunction onPointerUp(){\r\n  if(!dragActive.value) return\r\n  // threshold in px\r\n  const threshold = 50\r\n  if(dragOffset.value > threshold){ prev() }\r\n  else if(dragOffset.value < -threshold){ next() }\r\n  // reset\r\n  dragOffset.value = 0\r\n  dragActive.value = false\r\n}\r\n\r\nfunction stopSpeech(){ if(window.speechSynthesis){ window.speechSynthesis.cancel() } }\r\n\r\nfunction speak(){\r\n  // ä½¿ç”¨ Web Speech API åšè¯­éŸ³æœ—è¯»ï¼ˆè‹¥ä¸æ”¯æŒåˆ™é€€å› alertï¼‰\r\n  const text = current.value.desc || current.value.title\r\n  if(window.speechSynthesis){\r\n    window.speechSynthesis.cancel()\r\n    const u = new SpeechSynthesisUtterance(text)\r\n    u.rate = 0.95\r\n    window.speechSynthesis.speak(u)\r\n  } else {\r\n    alert(text)\r\n  }\r\n}\r\n\r\nfunction enterAr(){\r\n  // è¿›å…¥ AR è¯¦æƒ…é¡µï¼ˆå ä½ï¼Œè·¯ç”±å·²å­˜åœ¨ï¼‰\r\n  router.push('/beautiful/ar/detail')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.beautiful-ar{min-height:100vh;background:#f6f2ed;display:flex;flex-direction:column}\r\n.art-wrap{position:relative;flex:1;padding:12px 12px 90px}\r\n\r\n/* è½®æ’­è§†è§‰ */\r\n.slides{display:flex;transition:transform .4s cubic-bezier(.2,.9,.3,1);height:calc(100vh - 260px);overflow:hidden}\r\n.slides.grabbing{transition:none}\r\n.slide{flex:0 0 100%;display:flex;align-items:center;justify-content:center;padding:0 6px}\r\n.art-img{width:100%;height:100%;object-fit:cover;border-radius:18px;box-shadow:0 12px 36px rgba(0,0,0,0.12)}\r\n\r\n.nav{position:absolute;top:40%;width:56px;height:56px;border-radius:50%;background:#fff;border:none;box-shadow:0 8px 22px rgba(0,0,0,0.16);display:flex;align-items:center;justify-content:center;font-size:28px;color:#551313}\r\n.nav.left{left:10px}\r\n.nav.right{right:10px}\r\n\r\n.listen{position:absolute;left:18px;bottom:160px;background:#fff;padding:10px 14px;border-radius:12px;display:inline-flex;align-items:center;gap:8px;box-shadow:0 10px 26px rgba(0,0,0,0.12);border:none}\r\n.listen .ear{font-size:18px}\r\n.listen .txt{font-size:14px}\r\n\r\n.bottom-card{position:absolute;left:12px;right:12px;bottom:22px;background:linear-gradient(180deg,#fff,#faf7f3);border-radius:18px;padding:16px 16px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 18px 40px rgba(0,0,0,0.12)}\r\n.card-left .title{font-size:22px;font-weight:700;color:#2b2b2b}\r\n.card-left .en{font-weight:500;font-size:12px;margin-left:8px;color:#8f6f5b}\r\n.excerpt{font-size:12px;color:#666;margin-top:8px;max-width:60%}\r\n.rating{margin-top:8px;color:#c76b3c}\r\n\r\n.card-right{display:flex;align-items:center}\r\n.ar-cta{background:#b72b22;color:#fff;border:none;padding:14px 18px;border-radius:18px 8px 18px 18px;box-shadow:0 12px 36px rgba(183,43,34,0.22);display:flex;flex-direction:column;align-items:center;justify-content:center}\r\n.ar-cta .cta-text{font-weight:700;text-align:center}\r\n.ar-cta .cta-arrow{margin-top:6px;font-size:14px}\r\n\r\n.progress{position:absolute;left:22px;right:22px;bottom:12px;display:flex;align-items:center}\r\n.bar{height:4px;background:rgba(0,0,0,0.06);width:100%;border-radius:6px;overflow:hidden}\r\n.pos{height:100%;background:linear-gradient(90deg,#d8332a,#f07b6c);width:0}\r\n\r\n@media (max-width:420px){\r\n  .art-img{height:62vh;border-radius:26px}\r\n  .listen{left:16px;bottom:180px}\r\n  .bottom-card{padding:12px;bottom:18px}\r\n  .ar-cta{padding:12px 16px}\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAU;;;EAmCdA,KAAK,EAAC;AAAU;;EACdA,KAAK,EAAC;AAAK;;uBArCtBC,mBAAA,CAwCM,OAxCNC,UAwCM,GAvCJC,mBAAA,CAsCM,OAtCNC,UAsCM,GArCJC,mBAAA,cAAiB,EACjBF,mBAAA,CAIM;IAJDH,KAAK,EAAAM,eAAA,EAAC,QAAQ;MAAAC,QAAA,EAAqBC,MAAA,CAAAC;IAAU;IAAKC,aAAW,EAAAC,cAAA,CAAUH,MAAA,CAAAI,aAAa;IAAGC,aAAW,EAAAF,cAAA,CAAUH,MAAA,CAAAM,aAAa;IAAGC,WAAS,EAAAJ,cAAA,CAAUH,MAAA,CAAAQ,WAAW;IAAGC,eAAa,EAAET,MAAA,CAAAQ,WAAW;IAAGE,YAAU,EAAEV,MAAA,CAAAQ,WAAW;IAAGG,KAAK,EAAAC,eAAA,CAAEZ,MAAA,CAAAa,WAAW;yBACzOpB,mBAAA,CAEMqB,SAAA,QAAAC,WAAA,CAFWf,MAAA,CAAAgB,MAAM,EAAXC,CAAC;yBAAbxB,mBAAA,CAEM;MAFoByB,GAAG,EAAED,CAAC,CAACE,EAAE;MAAE3B,KAAK,EAAC;QACzCG,mBAAA,CAAqD;MAAhDH,KAAK,EAAC,SAAS;MAAE4B,GAAG,EAAEH,CAAC,CAACI,KAAK;MAAGC,GAAG,EAAEL,CAAC,CAACM;;2EAIhD1B,mBAAA,UAAa,EACbF,mBAAA,CAAkE;IAA1DH,KAAK,EAAC,UAAU;IAAEgC,OAAK,EAAExB,MAAA,CAAAyB,IAAI;IAAE,YAAU,EAAC;KAAM,GAAC,GACzD9B,mBAAA,CAAmE;IAA3DH,KAAK,EAAC,WAAW;IAAEgC,OAAK,EAAExB,MAAA,CAAA0B,IAAI;IAAE,YAAU,EAAC;KAAM,GAAC,GAE1D7B,mBAAA,YAAe,EACfF,mBAAA,CAGS;IAHDH,KAAK,EAAC,QAAQ;IAAEgC,OAAK,EAAExB,MAAA,CAAA2B,KAAK;IAAE,cAAY,EAAC;qCACjDhC,mBAAA,CAA2B;IAArBH,KAAK,EAAC;EAAK,GAAC,IAAE,oBACpBG,mBAAA,CAA4B;IAAtBH,KAAK,EAAC;EAAK,GAAC,KAAG,mB,MAGvBK,mBAAA,WAAc,EACdF,mBAAA,CAaM;IAbDH,KAAK,EAAC;EAAa,I,iXAOtBG,mBAAA,CAKM;IALDH,KAAK,EAAC;EAAY,IACrBG,mBAAA,CAGS;IAHDH,KAAK,EAAC,QAAQ;IAAEgC,OAAK,EAAExB,MAAA,CAAA4B,OAAO;IAAE,YAAU,EAAC;qCACjDjC,mBAAA,CAA0C;IAArCH,KAAK,EAAC;EAAU,I,iBAAC,MAAI,GAAAG,mBAAA,CAAK,O,iBAAA,OAAK,E,oBACpCA,mBAAA,CAA8B;IAAzBH,KAAK,EAAC;EAAW,GAAC,GAAC,mB,UAK9BK,mBAAA,WAAc,EACdF,mBAAA,CAEM,OAFNkC,UAEM,GADJlC,mBAAA,CAAiF,OAAjFmC,UAAiF,GAAhEnC,mBAAA,CAA0D;IAArDH,KAAK,EAAC,KAAK;IAAEmB,KAAK,EAAAC,eAAA;MAAAmB,KAAA,EAAW/B,MAAA,CAAAgC,QAAQ;IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
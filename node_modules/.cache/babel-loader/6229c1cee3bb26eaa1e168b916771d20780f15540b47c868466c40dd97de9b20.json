{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport art1 from '@/assets/images/beautiful/memory-placeholder.jpg';\nimport art2 from '@/assets/images/beautiful/more.jpg';\nimport art3 from '@/assets/images/beautiful/leisure.jpg';\nexport default {\n  __name: 'BeautifulAR',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    /* eslint-env vue/setup-compiler-macros */\n    const router = useRouter();\n    const slides = ref([{\n      id: 1,\n      title: 'ËøΩÊ±ÇÁúüÁêÜ - 1',\n      image: art1,\n      desc: 'ÊäóÊó•Êàò‰∫âÂÖ®Èù¢ÁàÜÂèëÂêéÔºåÂ•π‰∏ªÂä®ËÆ¢ÈòÖ„ÄäÊñ∞ÂçéÊó•Êä•„ÄãÂπ∂ÂºÄÂßã‰∫ÜËß£ÂÖ±‰∫ßÂÖö„ÄÇ'\n    }, {\n      id: 2,\n      title: 'ËøΩÊ±ÇÁúüÁêÜ - 2',\n      image: art2,\n      desc: 'Âú®ÂüéÂ∏ÇÈáåÊ≤°ÊúâÊñáÂåñÂíåÁü•ËØÜÊ†πÊú¨‰º†‰∏ç‰∏ãÂéªÔºåÂè™ÊúâÁü•ËØÜÊâçËÉΩÊîπÂèòËá™Â∑±„ÄÇ'\n    }, {\n      id: 3,\n      title: 'ËøΩÊ±ÇÁúüÁêÜ - 3',\n      image: art3,\n      desc: '1938 Âπ¥ÔºåÂ•πÂºÄÂßãÁî®ÊñáÂ≠ó‰∏éË°åÂä®ËøΩÊ±ÇÁúüÁêÜ„ÄÇ'\n    }]);\n    const idx = ref(0);\n    const current = computed(() => slides.value[idx.value]);\n    const progress = computed(() => Math.round(idx.value / (slides.value.length - 1) * 100));\n\n    // swipe / drag state\n    const dragOffset = ref(0);\n    const dragActive = ref(false);\n    let startX = 0;\n    const slidesStyle = computed(() => ({\n      width: `${slides.value.length * 100}%`,\n      transform: `translateX(calc(-${idx.value * 100}% + ${dragOffset.value}px))`\n    }));\n    function prev() {\n      stopSpeech();\n      idx.value = (idx.value - 1 + slides.value.length) % slides.value.length;\n    }\n    function next() {\n      stopSpeech();\n      idx.value = (idx.value + 1) % slides.value.length;\n    }\n    function onPointerDown(e) {\n      dragActive.value = true;\n      startX = e.clientX;\n    }\n    function onPointerMove(e) {\n      if (!dragActive.value) return;\n      dragOffset.value = e.clientX - startX;\n    }\n    function onPointerUp() {\n      if (!dragActive.value) return;\n      // threshold in px\n      const threshold = 50;\n      if (dragOffset.value > threshold) {\n        prev();\n      } else if (dragOffset.value < -threshold) {\n        next();\n      }\n      // reset\n      dragOffset.value = 0;\n      dragActive.value = false;\n    }\n    function stopSpeech() {\n      if (window.speechSynthesis) {\n        window.speechSynthesis.cancel();\n      }\n    }\n    function speak() {\n      // ‰ΩøÁî® Web Speech API ÂÅöËØ≠Èü≥ÊúóËØªÔºàËã•‰∏çÊîØÊåÅÂàôÈÄÄÂõû alertÔºâ\n      const text = current.value.desc || current.value.title;\n      if (window.speechSynthesis) {\n        window.speechSynthesis.cancel();\n        const u = new SpeechSynthesisUtterance(text);\n        u.rate = 0.95;\n        window.speechSynthesis.speak(u);\n      } else {\n        alert(text);\n      }\n    }\n    function enterAr() {\n      // ËøõÂÖ• AR ËØ¶ÊÉÖÈ°µÔºàÂç†‰ΩçÔºåË∑ØÁî±Â∑≤Â≠òÂú®Ôºâ\n      router.push('/beautiful/ar/detail');\n    }\n    const __returned__ = {\n      router,\n      slides,\n      idx,\n      current,\n      progress,\n      dragOffset,\n      dragActive,\n      get startX() {\n        return startX;\n      },\n      set startX(v) {\n        startX = v;\n      },\n      slidesStyle,\n      prev,\n      next,\n      onPointerDown,\n      onPointerMove,\n      onPointerUp,\n      stopSpeech,\n      speak,\n      enterAr,\n      ref,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get art1() {\n        return art1;\n      },\n      get art2() {\n        return art2;\n      },\n      get art3() {\n        return art3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","useRouter","art1","art2","art3","router","slides","id","title","image","desc","idx","current","value","progress","Math","round","length","dragOffset","dragActive","startX","slidesStyle","width","transform","prev","stopSpeech","next","onPointerDown","e","clientX","onPointerMove","onPointerUp","threshold","window","speechSynthesis","cancel","speak","text","u","SpeechSynthesisUtterance","rate","alert","enterAr","push"],"sources":["E:/jiangjie-museum/GitHub/jiangjie-museum/src/views/BeautifulAR.vue"],"sourcesContent":["<template>\r\n  <div class=\"beautiful-ar\">\r\n    <div class=\"art-wrap\">\r\n      <!-- ÂèØÊªëÂä®ÁöÑËΩÆÊí≠ÂÆπÂô® -->\r\n      <div class=\"slides\" :class=\"{ grabbing: dragActive }\" @pointerdown.prevent=\"onPointerDown\" @pointermove.prevent=\"onPointerMove\" @pointerup.prevent=\"onPointerUp\" @pointercancel=\"onPointerUp\" @mouseleave=\"onPointerUp\" :style=\"slidesStyle\">\r\n        <div v-for=\"s in slides\" :key=\"s.id\" class=\"slide\">\r\n          <img class=\"art-img\" :src=\"s.image\" :alt=\"s.title\" />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Â∑¶Âè≥ÁøªÈ°µ -->\r\n      <button class=\"nav left\" @click=\"prev\" aria-label=\"‰∏ä‰∏ÄÂº†\">‚Äπ</button>\r\n      <button class=\"nav right\" @click=\"next\" aria-label=\"‰∏ã‰∏ÄÂº†\">‚Ä∫</button>\r\n\r\n      <!-- Âê¨Â•πËØ¥ ÊåâÈíÆ -->\r\n      <button class=\"listen\" @click=\"speak\" aria-pressed=\"false\">\r\n        <span class=\"ear\">üéß</span>\r\n        <span class=\"txt\">Âê¨Â•πËØ¥</span>\r\n      </button>\r\n\r\n      <!-- Â∫ïÈÉ®‰ø°ÊÅØÂç° -->\r\n      <div class=\"bottom-card\">\r\n        <div class=\"card-left\">\r\n          <div class=\"title\">ËøΩÊ±ÇÁúüÁêÜ <span class=\"en\">HUNGER FOR TRUTH</span></div>\r\n          <div class=\"excerpt\">ÊäóÊó•Êàò‰∫âÂÖ®Èù¢ÁàÜÂèëÂêéÔºå‰∏∫ÁñèÊï£ÊïôËÅåÔºåÂçóÂ≤∏‰∏≠Â≠¶ËøÅÂà∞ÈôÑËøëÔºåÊ±üÁ´πÁ≠†Âπ∂Ê≤°Êúâ‰∏éÂ≠¶Ê†°ËøÅÁßª„ÄÇ1938Âπ¥ÔºåÂ•π‰∏ªÂä®ËÆ¢ÈòÖ„ÄäÊñ∞ÂçéÊó•Êä•„ÄãÔºåÂºÄÂßãËÆ§ËØÜ‰∫ÜËß£ÂÖ±‰∫ßÂÖö„ÄÇ</div>\r\n          <div class=\"rating\">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚òÜ‚òÜ</div>\r\n        </div>\r\n\r\n        <div class=\"card-right\">\r\n          <button class=\"ar-cta\" @click=\"enterAr\" aria-label=\"ËøõÂÖ• AR ‰ΩìÈ™å\">\r\n            <div class=\"cta-text\">Á´ãÂç≥AR<br/>Ê≤âÊµ∏Âºè‰ΩìÈ™å</div>\r\n            <div class=\"cta-arrow\">‚Üó</div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Â∫ïÈÉ®ËøõÂ∫¶Êù° -->\r\n      <div class=\"progress\">\r\n        <div class=\"bar\"><div class=\"pos\" :style=\"{ width: progress + '%' }\"></div></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n/* eslint-env vue/setup-compiler-macros */\r\nimport { ref, computed } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport art1 from '@/assets/images/beautiful/memory-placeholder.jpg'\r\nimport art2 from '@/assets/images/beautiful/more.jpg'\r\nimport art3 from '@/assets/images/beautiful/leisure.jpg'\r\n\r\nconst router = useRouter()\r\n\r\nconst slides = ref([\r\n  { id: 1, title: 'ËøΩÊ±ÇÁúüÁêÜ - 1', image: art1, desc: 'ÊäóÊó•Êàò‰∫âÂÖ®Èù¢ÁàÜÂèëÂêéÔºåÂ•π‰∏ªÂä®ËÆ¢ÈòÖ„ÄäÊñ∞ÂçéÊó•Êä•„ÄãÂπ∂ÂºÄÂßã‰∫ÜËß£ÂÖ±‰∫ßÂÖö„ÄÇ' },\r\n  { id: 2, title: 'ËøΩÊ±ÇÁúüÁêÜ - 2', image: art2, desc: 'Âú®ÂüéÂ∏ÇÈáåÊ≤°ÊúâÊñáÂåñÂíåÁü•ËØÜÊ†πÊú¨‰º†‰∏ç‰∏ãÂéªÔºåÂè™ÊúâÁü•ËØÜÊâçËÉΩÊîπÂèòËá™Â∑±„ÄÇ' },\r\n  { id: 3, title: 'ËøΩÊ±ÇÁúüÁêÜ - 3', image: art3, desc: '1938 Âπ¥ÔºåÂ•πÂºÄÂßãÁî®ÊñáÂ≠ó‰∏éË°åÂä®ËøΩÊ±ÇÁúüÁêÜ„ÄÇ' }\r\n])\r\n\r\nconst idx = ref(0)\r\nconst current = computed(() => slides.value[idx.value])\r\nconst progress = computed(() => Math.round((idx.value / (slides.value.length - 1)) * 100))\r\n\r\n// swipe / drag state\r\nconst dragOffset = ref(0)\r\nconst dragActive = ref(false)\r\nlet startX = 0\r\n\r\nconst slidesStyle = computed(() => ({\r\n  width: `${slides.value.length * 100}%`,\r\n  transform: `translateX(calc(-${idx.value * 100}% + ${dragOffset.value}px))`,\r\n}))\r\n\r\nfunction prev(){\r\n  stopSpeech()\r\n  idx.value = (idx.value - 1 + slides.value.length) % slides.value.length\r\n}\r\nfunction next(){\r\n  stopSpeech()\r\n  idx.value = (idx.value + 1) % slides.value.length\r\n}\r\n\r\nfunction onPointerDown(e){\r\n  dragActive.value = true\r\n  startX = e.clientX\r\n}\r\nfunction onPointerMove(e){\r\n  if(!dragActive.value) return\r\n  dragOffset.value = e.clientX - startX\r\n}\r\nfunction onPointerUp(){\r\n  if(!dragActive.value) return\r\n  // threshold in px\r\n  const threshold = 50\r\n  if(dragOffset.value > threshold){ prev() }\r\n  else if(dragOffset.value < -threshold){ next() }\r\n  // reset\r\n  dragOffset.value = 0\r\n  dragActive.value = false\r\n}\r\n\r\nfunction stopSpeech(){ if(window.speechSynthesis){ window.speechSynthesis.cancel() } }\r\n\r\nfunction speak(){\r\n  // ‰ΩøÁî® Web Speech API ÂÅöËØ≠Èü≥ÊúóËØªÔºàËã•‰∏çÊîØÊåÅÂàôÈÄÄÂõû alertÔºâ\r\n  const text = current.value.desc || current.value.title\r\n  if(window.speechSynthesis){\r\n    window.speechSynthesis.cancel()\r\n    const u = new SpeechSynthesisUtterance(text)\r\n    u.rate = 0.95\r\n    window.speechSynthesis.speak(u)\r\n  } else {\r\n    alert(text)\r\n  }\r\n}\r\n\r\nfunction enterAr(){\r\n  // ËøõÂÖ• AR ËØ¶ÊÉÖÈ°µÔºàÂç†‰ΩçÔºåË∑ØÁî±Â∑≤Â≠òÂú®Ôºâ\r\n  router.push('/beautiful/ar/detail')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.beautiful-ar{min-height:100vh;background:#f6f2ed;display:flex;flex-direction:column}\r\n.art-wrap{position:relative;flex:1;padding:12px 12px 90px}\r\n\r\n/* ËΩÆÊí≠ËßÜËßâ */\r\n.slides{display:flex;transition:transform .4s cubic-bezier(.2,.9,.3,1);height:calc(100vh - 260px);overflow:hidden}\r\n.slides.grabbing{transition:none}\r\n.slide{flex:0 0 100%;display:flex;align-items:center;justify-content:center;padding:0 6px}\r\n.art-img{width:100%;height:100%;object-fit:cover;border-radius:18px;box-shadow:0 12px 36px rgba(0,0,0,0.12)}\r\n\r\n.nav{position:absolute;top:40%;width:56px;height:56px;border-radius:50%;background:#fff;border:none;box-shadow:0 8px 22px rgba(0,0,0,0.16);display:flex;align-items:center;justify-content:center;font-size:28px;color:#551313}\r\n.nav.left{left:10px}\r\n.nav.right{right:10px}\r\n\r\n.listen{position:absolute;left:18px;bottom:160px;background:#fff;padding:10px 14px;border-radius:12px;display:inline-flex;align-items:center;gap:8px;box-shadow:0 10px 26px rgba(0,0,0,0.12);border:none}\r\n.listen .ear{font-size:18px}\r\n.listen .txt{font-size:14px}\r\n\r\n.bottom-card{position:absolute;left:12px;right:12px;bottom:22px;background:linear-gradient(180deg,#fff,#faf7f3);border-radius:18px;padding:16px 16px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 18px 40px rgba(0,0,0,0.12)}\r\n.card-left .title{font-size:22px;font-weight:700;color:#2b2b2b}\r\n.card-left .en{font-weight:500;font-size:12px;margin-left:8px;color:#8f6f5b}\r\n.excerpt{font-size:12px;color:#666;margin-top:8px;max-width:60%}\r\n.rating{margin-top:8px;color:#c76b3c}\r\n\r\n.card-right{display:flex;align-items:center}\r\n.ar-cta{background:#b72b22;color:#fff;border:none;padding:14px 18px;border-radius:18px 8px 18px 18px;box-shadow:0 12px 36px rgba(183,43,34,0.22);display:flex;flex-direction:column;align-items:center;justify-content:center}\r\n.ar-cta .cta-text{font-weight:700;text-align:center}\r\n.ar-cta .cta-arrow{margin-top:6px;font-size:14px}\r\n\r\n.progress{position:absolute;left:22px;right:22px;bottom:12px;display:flex;align-items:center}\r\n.bar{height:4px;background:rgba(0,0,0,0.06);width:100%;border-radius:6px;overflow:hidden}\r\n.pos{height:100%;background:linear-gradient(90deg,#d8332a,#f07b6c);width:0}\r\n\r\n@media (max-width:420px){\r\n  .art-img{height:62vh;border-radius:26px}\r\n  .listen{left:16px;bottom:180px}\r\n  .bottom-card{padding:12px;bottom:18px}\r\n  .ar-cta{padding:12px 16px}\r\n}\r\n</style>"],"mappings":";AA8CA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,IAAI,MAAM,kDAAkD;AACnE,OAAOC,IAAI,MAAM,oCAAoC;AACrD,OAAOC,IAAI,MAAM,uCAAuC;;;;;;;;IALxD;IAOA,MAAMC,MAAM,GAAGJ,SAAS,CAAC,CAAC;IAE1B,MAAMK,MAAM,GAAGP,GAAG,CAAC,CACjB;MAAEQ,EAAE,EAAE,CAAC;MAAEC,KAAK,EAAE,UAAU;MAAEC,KAAK,EAAEP,IAAI;MAAEQ,IAAI,EAAE;IAAiC,CAAC,EACjF;MAAEH,EAAE,EAAE,CAAC;MAAEC,KAAK,EAAE,UAAU;MAAEC,KAAK,EAAEN,IAAI;MAAEO,IAAI,EAAE;IAAgC,CAAC,EAChF;MAAEH,EAAE,EAAE,CAAC;MAAEC,KAAK,EAAE,UAAU;MAAEC,KAAK,EAAEL,IAAI;MAAEM,IAAI,EAAE;IAAwB,CAAC,CACzE,CAAC;IAEF,MAAMC,GAAG,GAAGZ,GAAG,CAAC,CAAC,CAAC;IAClB,MAAMa,OAAO,GAAGZ,QAAQ,CAAC,MAAMM,MAAM,CAACO,KAAK,CAACF,GAAG,CAACE,KAAK,CAAC,CAAC;IACvD,MAAMC,QAAQ,GAAGd,QAAQ,CAAC,MAAMe,IAAI,CAACC,KAAK,CAAEL,GAAG,CAACE,KAAK,IAAIP,MAAM,CAACO,KAAK,CAACI,MAAM,GAAG,CAAC,CAAC,GAAI,GAAG,CAAC,CAAC;;IAE1F;IACA,MAAMC,UAAU,GAAGnB,GAAG,CAAC,CAAC,CAAC;IACzB,MAAMoB,UAAU,GAAGpB,GAAG,CAAC,KAAK,CAAC;IAC7B,IAAIqB,MAAM,GAAG,CAAC;IAEd,MAAMC,WAAW,GAAGrB,QAAQ,CAAC,OAAO;MAClCsB,KAAK,EAAE,GAAGhB,MAAM,CAACO,KAAK,CAACI,MAAM,GAAG,GAAG,GAAG;MACtCM,SAAS,EAAE,oBAAoBZ,GAAG,CAACE,KAAK,GAAG,GAAG,OAAOK,UAAU,CAACL,KAAK;IACvE,CAAC,CAAC,CAAC;IAEH,SAASW,IAAIA,CAAA,EAAE;MACbC,UAAU,CAAC,CAAC;MACZd,GAAG,CAACE,KAAK,GAAG,CAACF,GAAG,CAACE,KAAK,GAAG,CAAC,GAAGP,MAAM,CAACO,KAAK,CAACI,MAAM,IAAIX,MAAM,CAACO,KAAK,CAACI,MAAM;IACzE;IACA,SAASS,IAAIA,CAAA,EAAE;MACbD,UAAU,CAAC,CAAC;MACZd,GAAG,CAACE,KAAK,GAAG,CAACF,GAAG,CAACE,KAAK,GAAG,CAAC,IAAIP,MAAM,CAACO,KAAK,CAACI,MAAM;IACnD;IAEA,SAASU,aAAaA,CAACC,CAAC,EAAC;MACvBT,UAAU,CAACN,KAAK,GAAG,IAAI;MACvBO,MAAM,GAAGQ,CAAC,CAACC,OAAO;IACpB;IACA,SAASC,aAAaA,CAACF,CAAC,EAAC;MACvB,IAAG,CAACT,UAAU,CAACN,KAAK,EAAE;MACtBK,UAAU,CAACL,KAAK,GAAGe,CAAC,CAACC,OAAO,GAAGT,MAAM;IACvC;IACA,SAASW,WAAWA,CAAA,EAAE;MACpB,IAAG,CAACZ,UAAU,CAACN,KAAK,EAAE;MACtB;MACA,MAAMmB,SAAS,GAAG,EAAE;MACpB,IAAGd,UAAU,CAACL,KAAK,GAAGmB,SAAS,EAAC;QAAER,IAAI,CAAC,CAAC;MAAC,CAAC,MACrC,IAAGN,UAAU,CAACL,KAAK,GAAG,CAACmB,SAAS,EAAC;QAAEN,IAAI,CAAC,CAAC;MAAC;MAC/C;MACAR,UAAU,CAACL,KAAK,GAAG,CAAC;MACpBM,UAAU,CAACN,KAAK,GAAG,KAAK;IAC1B;IAEA,SAASY,UAAUA,CAAA,EAAE;MAAE,IAAGQ,MAAM,CAACC,eAAe,EAAC;QAAED,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;MAAC;IAAE;IAErF,SAASC,KAAKA,CAAA,EAAE;MACd;MACA,MAAMC,IAAI,GAAGzB,OAAO,CAACC,KAAK,CAACH,IAAI,IAAIE,OAAO,CAACC,KAAK,CAACL,KAAK;MACtD,IAAGyB,MAAM,CAACC,eAAe,EAAC;QACxBD,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;QAC/B,MAAMG,CAAC,GAAG,IAAIC,wBAAwB,CAACF,IAAI,CAAC;QAC5CC,CAAC,CAACE,IAAI,GAAG,IAAI;QACbP,MAAM,CAACC,eAAe,CAACE,KAAK,CAACE,CAAC,CAAC;MACjC,CAAC,MAAM;QACLG,KAAK,CAACJ,IAAI,CAAC;MACb;IACF;IAEA,SAASK,OAAOA,CAAA,EAAE;MAChB;MACArC,MAAM,CAACsC,IAAI,CAAC,sBAAsB,CAAC;IACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}